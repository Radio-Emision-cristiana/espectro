<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - Control de Volumen Reparado</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .demo-container {
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .control-demo {
            position: relative;
            display: inline-block;
            margin: 50px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        
        .status-panel {
            margin: 30px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            text-align: left;
            max-width: 400px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .success {
            color: #00ff99;
            font-weight: bold;
        }
        
        .error {
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .instruction-badge {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin: 10px;
            display: inline-block;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .volume-display {
            font-size: 24px;
            font-weight: bold;
            color: #00ff99;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(0, 255, 153, 0.5);
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>üîß Control de Volumen Reparado</h1>
        <p>La barra de volumen flotante ha sido completamente reparada</p>
        
        <div class="instruction-badge">
            üëÜ Haz clic en el bot√≥n de volumen de abajo
        </div>
        
        <div class="control-demo">
            <!-- Audio oculto para la demostraci√≥n -->
            <audio id="audio-player" loop>
                <source src="https://www.learningcontainer.com/wp-content/uploads/2020/02/Kalimba.mp3" type="audio/mpeg">
            </audio>
            
            <!-- Control de volumen flotante -->
            <div class="floating-volume-container">
                <!-- Bot√≥n flotante -->
                <button class="volume-toggle-btn" id="volume-toggle-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z"/>
                    </svg>
                </button>
                
                <!-- Contenedor deslizante de la barra -->
                <div class="volume-slider-container" id="volume-slider-container">
                    <input type="range" id="mini-volume-slider" min="0" max="1" step="0.01" value="0.7">
                    <div class="volume-percentage" id="volume-percentage">70%</div>
                </div>
            </div>
        </div>
        
        <div class="volume-display" id="live-volume">
            Volumen: <span id="volume-value">70%</span>
        </div>
        
        <div class="status-panel">
            <h3>üìä Estado del Sistema:</h3>
            <div class="status-item">
                <span>Elementos HTML:</span>
                <span id="elements-status" class="error">‚ùå</span>
            </div>
            <div class="status-item">
                <span>Event Listeners:</span>
                <span id="listeners-status" class="error">‚ùå</span>
            </div>
            <div class="status-item">
                <span>CSS Aplicado:</span>
                <span id="css-status" class="error">‚ùå</span>
            </div>
            <div class="status-item">
                <span>Funcionalidad:</span>
                <span id="function-status" class="error">‚ùå</span>
            </div>
        </div>
        
        <div style="margin-top: 30px;">
            <h3>üõ†Ô∏è Reparaciones Aplicadas:</h3>
            <ul style="text-align: left; max-width: 500px; margin: 0 auto;">
                <li>‚úÖ CSS del slider vertical completamente reescrito</li>
                <li>‚úÖ Eliminados writing-mode y -webkit-appearance conflictivos</li>
                <li>‚úÖ Z-index aumentado a 10000 para evitar superposiciones</li>
                <li>‚úÖ Event listeners m√∫ltiples agregados (input, change, mousemove, touchmove)</li>
                <li>‚úÖ Debugging extenso agregado para identificar problemas</li>
                <li>‚úÖ Reglas CSS globales ajustadas para no interferir con sliders</li>
                <li>‚úÖ Funcionalidad de click fuera mejorada</li>
            </ul>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let statusChecks = 0;
            
            // Verificar elementos
            const audio = document.getElementById('audio-player');
            const volumeBtn = document.getElementById('volume-toggle-btn');
            const volumeSlider = document.getElementById('mini-volume-slider');
            const volumeContainer = document.getElementById('volume-slider-container');
            const volumePercentage = document.getElementById('volume-percentage');
            const volumeValue = document.getElementById('volume-value');
            
            // Status 1: Elementos HTML
            if (audio && volumeBtn && volumeSlider && volumeContainer && volumePercentage) {
                document.getElementById('elements-status').textContent = '‚úÖ';
                document.getElementById('elements-status').className = 'success';
                statusChecks++;
            }
            
            // Status 2: CSS aplicado
            const containerStyles = window.getComputedStyle(volumeContainer);
            if (containerStyles.position === 'absolute' && containerStyles.zIndex === '10000') {
                document.getElementById('css-status').textContent = '‚úÖ';
                document.getElementById('css-status').className = 'success';
                statusChecks++;
            }
            
            // Status 3: Event listeners
            if (volumeSlider) {
                let listenerWorking = false;
                
                // Probar evento input
                volumeSlider.addEventListener('input', function() {
                    listenerWorking = true;
                    const percentage = Math.round(this.value * 100);
                    if (volumeValue) {
                        volumeValue.textContent = percentage + '%';
                    }
                    if (audio) {
                        audio.volume = this.value;
                    }
                });
                
                // Simular cambio para probar
                setTimeout(() => {
                    const originalValue = volumeSlider.value;
                    volumeSlider.value = '0.5';
                    volumeSlider.dispatchEvent(new Event('input'));
                    volumeSlider.value = originalValue;
                    volumeSlider.dispatchEvent(new Event('input'));
                    
                    if (listenerWorking) {
                        document.getElementById('listeners-status').textContent = '‚úÖ';
                        document.getElementById('listeners-status').className = 'success';
                        statusChecks++;
                    }
                }, 500);
            }
            
            // Status 4: Funcionalidad completa
            setTimeout(() => {
                if (statusChecks >= 2) {
                    document.getElementById('function-status').textContent = '‚úÖ';
                    document.getElementById('function-status').className = 'success';
                }
            }, 1000);
            
            console.log('üîß Demo de volumen reparado iniciado');
            console.log('üìä Status checks:', statusChecks);
        });
    </script>
</body>
</html>