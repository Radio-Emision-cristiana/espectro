<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test: Bot√≥n Play/Pause Corregido</title> 
<link rel="stylesheet" href="styles.css">

<style>
/* CSS adicional para la prueba */
.test-info {
    position: fixed;
    top: 20px;
    left: 20px;
    right: 20px;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 20px;
    border-radius: 10px;
    font-size: 14px;
    z-index: 1001;
    max-height: 200px;
    overflow-y: auto;
}

.test-controls {
    margin-top: 15px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.test-btn {
    padding: 8px 16px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 12px;
}

.test-btn:hover {
    background: #45a049;
}

.status-display {
    position: fixed;
    bottom: 20px;
    left: 20px;
    right: 20px;
    background: rgba(255,255,255,0.95);
    color: black;
    padding: 15px;
    border-radius: 10px;
    font-family: monospace;
    font-size: 12px;
    z-index: 1002;
    border: 2px solid #4CAF50;
}

.player-container {
    margin-top: 250px;
    margin-bottom: 150px;
}

/* Eliminar outlines para esta prueba */
* {
    outline: none !important;
    -webkit-tap-highlight-color: transparent !important;
}
</style>

</head>
<body>

<!-- Informaci√≥n de prueba -->
<div class="test-info">
    <h3>üß™ Test: Bot√≥n Play/Pause Corregido</h3>
    <p><strong>Objetivo:</strong> Verificar que el bot√≥n de play puede iniciar Y reanudar la reproducci√≥n correctamente</p>
    
    <div class="test-controls">
        <button class="test-btn" onclick="testPlayButton()">üéµ Test Play</button>
        <button class="test-btn" onclick="testPauseButton()">‚è∏Ô∏è Test Pause</button>
        <button class="test-btn" onclick="testToggleSequence()">üîÑ Test Secuencia</button>
        <button class="test-btn" onclick="checkAudioState()">üìä Estado Audio</button>
        <button class="test-btn" onclick="clearLogs()">üóëÔ∏è Limpiar</button>
    </div>
    
    <p><strong>Instrucciones:</strong></p>
    <ul>
        <li>1Ô∏è‚É£ Presiona "Test Play" - debe iniciar la reproducci√≥n</li>
        <li>2Ô∏è‚É£ Presiona "Test Pause" - debe pausar</li>
        <li>3Ô∏è‚É£ Presiona "Test Play" otra vez - debe REANUDAR</li>
        <li>4Ô∏è‚É£ Usa "Test Secuencia" para probar autom√°ticamente</li>
    </ul>
</div>

<!-- Contenedor del reproductor -->
<div class="player-container">
    <div class="player">
        <div class="album-cover-container">
            <img id="album-cover" class="album-cover" src="portada.jpg" alt="Radio Logo"> 
            <div class="album-cover-overlay"></div>
        </div>

        <div class="audio-info">
            <div class="metadata-row-1">
                <div id="song-title">Radio En Vivo</div>
            </div>
            <div class="metadata-row-2">
                <div id="artist-name">Presiona play para escuchar</div>
            </div>
        </div>

        <div class="controls">
            <!-- Bot√≥n de play/pause principal -->
            <button class="play-pause-btn" id="play-pause-btn" onclick="togglePlay()">
                <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8 5v14l11-7z"/>
                </svg>
                <svg class="pause-icon" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                </svg>
            </button>

            <!-- Controles de volumen -->
            <div class="volume-controls">
                <button class="volume-btn" onclick="toggleMute()">
                    <svg class="volume-on-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    <svg class="volume-off-icon" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                    </svg>
                </button>
                <input type="range" class="volume-slider" min="0" max="100" value="50" oninput="setVolume(this.value)">
            </div>
        </div>

        <!-- Visualizador -->
        <div class="visualizer">
            <canvas id="canvas" width="300" height="60"></canvas>
        </div>
    </div>
</div>

<!-- Display de estado -->
<div class="status-display" id="status-display">
    üìä Estado inicial: Cargando...
</div>

<!-- Audio element (hidden) -->
<audio id="radio-audio" preload="none">
    Tu navegador no soporta el elemento de audio.
</audio>

<!-- Script corregido -->
<script src="main-play-fixed.js"></script>

<!-- Script de prueba -->
<script>
let testLogs = [];

function logTest(message) {
    const timestamp = new Date().toLocaleTimeString();
    testLogs.push(`[${timestamp}] ${message}`);
    updateStatusDisplay();
    console.log(`üß™ TEST: ${message}`);
}

function updateStatusDisplay() {
    const statusDiv = document.getElementById('status-display');
    const audio = document.getElementById('radio-audio');
    const playButton = document.getElementById('play-pause-btn');
    
    const status = `
üìä ESTADO ACTUAL:
‚ñ∂Ô∏è isPlaying: ${window.isPlaying || 'undefined'}
‚è∏Ô∏è audio.paused: ${audio ? audio.paused : 'N/A'}
üîß audio.readyState: ${audio ? audio.readyState : 'N/A'}
üìç audio.currentTime: ${audio ? audio.currentTime.toFixed(2) : 'N/A'}
üéµ audio.src: ${audio ? (audio.src ? 'SET' : 'NOT SET') : 'N/A'}
üîÑ Button classes: ${playButton ? playButton.className : 'N/A'}

üìã √öLTIMOS 5 LOGS:
${testLogs.slice(-5).join('\n')}
    `;
    
    statusDiv.textContent = status;
}

function testPlayButton() {
    logTest('üéµ Iniciando test de PLAY...');
    if (window.togglePlay) {
        window.togglePlay();
        setTimeout(() => {
            const audio = document.getElementById('radio-audio');
            logTest(`Resultado PLAY: paused=${audio.paused}, currentTime=${audio.currentTime}`);
        }, 2000);
    } else {
        logTest('‚ùå togglePlay function not found');
    }
}

function testPauseButton() {
    logTest('‚è∏Ô∏è Iniciando test de PAUSE...');
    if (window.togglePlay) {
        window.togglePlay();
        setTimeout(() => {
            const audio = document.getElementById('radio-audio');
            logTest(`Resultado PAUSE: paused=${audio.paused}, currentTime=${audio.currentTime}`);
        }, 1000);
    } else {
        logTest('‚ùå togglePlay function not found');
    }
}

function testToggleSequence() {
    logTest('üîÑ Iniciando secuencia de prueba autom√°tica...');
    
    let step = 1;
    const runStep = () => {
        switch(step) {
            case 1:
                logTest(`Paso ${step}: PLAY inicial`);
                testPlayButton();
                step++;
                setTimeout(runStep, 3000);
                break;
            case 2:
                logTest(`Paso ${step}: PAUSE`);
                testPauseButton();
                step++;
                setTimeout(runStep, 2000);
                break;
            case 3:
                logTest(`Paso ${step}: PLAY para reanudar`);
                testPlayButton();
                step++;
                setTimeout(runStep, 3000);
                break;
            case 4:
                logTest('‚úÖ Secuencia de prueba completada');
                break;
        }
    };
    
    runStep();
}

function checkAudioState() {
    const audio = document.getElementById('radio-audio');
    const playButton = document.getElementById('play-pause-btn');
    
    logTest('üìä Verificando estado completo...');
    logTest(`Audio element: ${audio ? 'EXISTS' : 'NOT FOUND'}`);
    logTest(`Play button: ${playButton ? 'EXISTS' : 'NOT FOUND'}`);
    
    if (audio) {
        logTest(`Audio paused: ${audio.paused}`);
        logTest(`Audio readyState: ${audio.readyState}`);
        logTest(`Audio currentTime: ${audio.currentTime}`);
        logTest(`Audio src: ${audio.src || 'NOT SET'}`);
    }
    
    if (playButton) {
        logTest(`Button classes: ${playButton.className}`);
    }
}

function clearLogs() {
    testLogs = [];
    logTest('üóëÔ∏è Logs limpiados');
}

// Actualizar estado cada segundo
setInterval(updateStatusDisplay, 1000);

// Log inicial
setTimeout(() => {
    logTest('üöÄ Sistema de prueba inicializado');
    checkAudioState();
}, 1000);
</script>

</body>
</html>